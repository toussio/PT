<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PT íŠ¸ë ˆì´ë„ˆ ì˜ˆì•½ ì‹œìŠ¤í…œ</title>
<style>
:root {
  --bg:#FFDEB3;
  --card:#FFF3E0;
  --accent:#f97316;
  --grad:linear-gradient(135deg,#ffb77a,#f97316,#ea580c);
  --ink:#2b1d12;
  --muted:#5c4033;
  --disabled:#bfa89c;
}
body {
  margin:0;
  font-family:"Pretendard",sans-serif;
  background:var(--bg);
  color:var(--ink);
  overflow-x:hidden;
}

/* ì¸íŠ¸ë¡œ */
.intro-overlay{
  position:fixed; inset:0;
  background:url('https://images.unsplash.com/photo-1558611848-73f7eb4001a1?auto=format&fit=crop&w=1400&q=80') center/cover no-repeat;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  z-index:999; text-align:center; color:#fff; backdrop-filter:blur(6px);
}
.intro-bg{position:absolute; inset:0; background:rgba(0,0,0,0.4);}
.intro-content{
  position:relative; z-index:2;
  max-width:800px; background:rgba(255,243,224,0.9);
  padding:40px 30px; border-radius:20px;
  box-shadow:0 0 20px rgba(249,115,22,0.4); color:var(--ink);
}
.intro-content h1{font-size:2rem; background:var(--grad);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.intro-controls button{
  background:var(--grad); color:#fff; border:none; padding:10px 24px;
  border-radius:12px; font-weight:600; cursor:pointer;
  box-shadow:0 0 10px rgba(249,115,22,.4); transition:.3s;
}
.intro-controls button:hover{transform:translateY(-3px);box-shadow:0 0 18px rgba(249,115,22,.6);}

/* ë©”ì¸ */
.main{display:none;padding:40px 20px 80px;animation:fadeInMain 1s ease;}
@keyframes fadeInMain{from{opacity:0;}to{opacity:1;}}
h2.title{
  text-align:center;font-size:1.8rem;
  background:var(--grad);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  margin-bottom:40px;
}

/* íŠ¸ë ˆì´ë„ˆ ì¹´ë“œ */
.trainer-section{
  display:flex;justify-content:center;align-items:center;
  margin-bottom:40px;position:relative;
}
.trainer-card{
  width:280px;border-radius:20px;background:var(--card);
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  text-align:center;overflow:hidden;cursor:grab;transition:.3s;
}
.trainer-card:active{cursor:grabbing;}
.trainer-card img{width:100%;height:180px;object-fit:cover;user-select:none;}
.trainer-card h3{margin:10px 0 4px;color:var(--accent);}
.trainer-card p{margin:0;color:var(--muted);}
.trainer-card:hover{box-shadow:0 6px 20px rgba(249,115,22,.3);transform:translateY(-3px);}

/* ìº˜ë¦°ë” */
.schedule-section{
  max-width:800px;margin:0 auto;
  background:var(--card);
  border-radius:20px;padding:30px;
  box-shadow:0 0 20px rgba(0,0,0,.08);
}
.schedule-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:10px;padding-bottom:16px;}
.day{
  text-align:center;padding:10px 0;border-radius:10px;
  background:rgba(255,255,255,0.7);
  cursor:pointer;transition:.25s;font-size:14px;min-height:55px;
}
.day:hover:not(.disabled):not(.booked){background:rgba(249,115,22,.25);transform:scale(1.05);}
.day.selected{outline:2px solid var(--accent);}
.day.booked{background:var(--grad);color:#fff;}
.day.disabled{color:var(--disabled);opacity:0.5;cursor:not-allowed;background:rgba(255,255,255,0.4);}
.day.today{outline:1px dashed var(--accent);}

/* ì‹œê°„ ì„ íƒ ë° ì˜ˆì•½ ë²„íŠ¼ */
.time-select-area {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  animation: fadePop .6s ease;
}
@keyframes fadePop {
  from {opacity: 0; transform: scale(0.9);}
  to {opacity: 1; transform: scale(1);}
}

/* select */
.time-select-area select {
  width: 80%;
  background: #fffaf3;
  border: 2px solid #ffd6a5;
  border-radius: 16px;
  padding: 14px 16px;
  font-size: 15px;
  font-weight: 600;
  color: var(--ink);
  box-shadow: 0 3px 10px rgba(0,0,0,0.08);
  transition: all .25s ease;
}
.time-select-area select:hover {
  border-color: #fca65a;
  background: #fff3e0;
  box-shadow: 0 4px 12px rgba(249,115,22,0.15);
}
.time-select-area select:focus {
  outline: none;
  border-color: #f97316;
  box-shadow: 0 0 10px rgba(249,115,22,0.3);
}
.time-select-area option[disabled] {
  color: var(--disabled);
}

/* ì˜ˆì•½ ë²„íŠ¼ */
button.reserve-btn {
  width: 80%;
  background: var(--grad);
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 16px 20px;
  font-size: 17px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(249, 115, 22, 0.3);
  transition: all .25s ease;
  position: relative;
  overflow: hidden;
}
button.reserve-btn:disabled {
  background: #e5c7a3;
  cursor: not-allowed;
  box-shadow: none;
  color: #fffaf3;
}
button.reserve-btn:hover:not(:disabled) {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(249,115,22,0.4);
}

/* í† ìŠ¤íŠ¸ */
.toast {
  position: fixed;
  bottom: 28px;
  left: 50%;
  transform: translateX(-50%);
  background: #fff8ee;
  color: var(--ink);
  border: 2px solid #ffd6a5;
  border-radius: 14px;
  padding: 12px 24px;
  font-weight: 600;
  font-size: 15px;
  box-shadow: 0 4px 15px rgba(249,115,22,0.2);
  animation: fadeInOut 3s ease forwards;
}
@keyframes fadeInOut {
  0% {opacity:0; transform:translate(-50%,20px);}
  10%,90% {opacity:1; transform:translate(-50%,0);}
  100% {opacity:0; transform:translate(-50%,20px);}
}
</style>
</head>
<body>

<!-- ì¸íŠ¸ë¡œ -->
<div class="intro-overlay" id="intro">
  <div class="intro-bg"></div>
  <div class="intro-content">
    <h1>ğŸ‹ï¸â€â™€ï¸ ì‘ë‘ PT ì„¼í„°</h1>
    <p>ë‹¹ì‹ ì˜ ëª¸ì„ ë””ìì¸í•˜ëŠ” ê³³ â€” ìµœê³ ì˜ íŠ¸ë ˆì´ë„ˆë“¤ê³¼ í•¨ê»˜í•˜ì„¸ìš”.</p>
    <div class="intro-controls"><button id="startBtn">ì‹œì‘í•˜ê¸°</button></div>
  </div>
</div>

<!-- ë©”ì¸ -->
<div class="main" id="main">
  <h2 class="title">íŠ¸ë ˆì´ë„ˆ ì˜ˆì•½ ì‹œìŠ¤í…œ</h2>
  <div class="trainer-section">
    <div class="trainer-card" id="trainerCard"></div>
  </div>

  <div class="schedule-section">
    <div class="schedule-header">
      <h3 id="trainerTitle">íŠ¸ë ˆì´ë„ˆ ì„ íƒ</h3>
      <span id="monthLabel"></span>
    </div>
    <div class="calendar" id="calendar"></div>
    <div class="time-select-area">
      <select id="timeSelect">
        <option value="">ì‹œê°„ ì„ íƒ</option>
      </select>
      <button class="reserve-btn" id="reserveBtn" disabled>ì˜ˆì•½í•˜ê¸°</button>
    </div>
  </div>
</div>

<script>
/* ì¸íŠ¸ë¡œ */
const intro=document.getElementById("intro");
const main=document.getElementById("main");
document.getElementById("startBtn").onclick=()=>{intro.style.opacity="0";setTimeout(()=>{intro.style.display="none";main.style.display="block";},600);};

/* íŠ¸ë ˆì´ë„ˆ */
const trainers=[
  {name:"íŠ¸ë ˆì´ë„ˆ A",photo:"https://via.placeholder.com/260x180?text=A",intro:"ì²´í˜• êµì • ì „ë¬¸ê°€"},
  {name:"íŠ¸ë ˆì´ë„ˆ B",photo:"https://via.placeholder.com/260x180?text=B",intro:"ë‹¤ì´ì–´íŠ¸ ì½”ì¹˜"},
  {name:"íŠ¸ë ˆì´ë„ˆ C",photo:"https://via.placeholder.com/260x180?text=C",intro:"ê·¼ë ¥ í–¥ìƒ ì „ë¬¸ê°€"},
  {name:"íŠ¸ë ˆì´ë„ˆ D",photo:"https://via.placeholder.com/260x180?text=D",intro:"ì¬í™œ íŠ¸ë ˆì´ë„ˆ"}
];
let currentTrainer=0;

/* ì¹´ë“œ 2ê°œ (ì•/ë’¤) ì¤€ë¹„ */
const trainerSection=document.querySelector(".trainer-section");
trainerSection.innerHTML = `
  <div class="trainer-card front-card" id="frontCard"></div>
  <div class="trainer-card back-card" id="backCard"></div>
`;

const frontCard=document.getElementById("frontCard");
const backCard=document.getElementById("backCard");
const trainerTitle=document.getElementById("trainerTitle");

function setTrainerContent(card, index){
  const t=trainers[index];
  card.innerHTML=`<img src="${t.photo}"><h3>${t.name}</h3><p>${t.intro}</p>`;
}

/* ì´ˆê¸° í‘œì‹œ */
setTrainerContent(frontCard, currentTrainer);
trainerTitle.textContent=`${trainers[currentTrainer].name} ì¼ì •`;

/* ë“œë˜ê·¸ ê´€ë ¨ */
let startX=0, currentX=0, isDragging=false;

function updateBackCard(direction){
  let nextIdx;
  if(direction==="left") nextIdx=(currentTrainer+1)%trainers.length;
  else nextIdx=(currentTrainer-1+trainers.length)%trainers.length;
  setTrainerContent(backCard, nextIdx);
  backCard.style.opacity=0.4;
  backCard.style.transform=`translateX(${direction==="left"? "100%" : "-100%"}) scale(0.95)`;
}

/* ê³µí†µ ë“œë˜ê·¸ í•¨ìˆ˜ */
function onDragStart(x){
  isDragging=true;
  startX=x;
  frontCard.style.transition="none";
  backCard.style.transition="none";
}
function onDragMove(x){
  if(!isDragging)return;
  currentX=x;
  const diff=currentX-startX;
  const dir = diff<0?"left":"right";
  updateBackCard(dir);
  frontCard.style.transform=`translateX(${diff}px) rotate(${diff/40}deg)`;
  backCard.style.transform=`translateX(${diff<0?diff+280:diff-280}px) scale(0.95)`;
  backCard.style.opacity=Math.min(0.5,Math.abs(diff)/300);
}
function onDragEnd(x){
  if(!isDragging)return;
  isDragging=false;
  const diff=x-startX;
  const abs=Math.abs(diff);
  frontCard.style.transition="transform .4s ease";
  backCard.style.transition="transform .4s ease, opacity .4s ease";
  if(abs>100){
    // ë°©í–¥ ê²°ì •
    const dir = diff<0?"left":"right";
    frontCard.style.transform=`translateX(${dir==="left"?"-120%":"120%"}) rotate(${dir==="left"?"-10deg":"10deg"})`;
    backCard.style.transform="translateX(0) scale(1)";
    backCard.style.opacity=1;
    setTimeout(()=>{
      currentTrainer = dir==="left" ? (currentTrainer+1)%trainers.length : (currentTrainer-1+trainers.length)%trainers.length;
      const temp=frontCard.innerHTML;
      frontCard.innerHTML=backCard.innerHTML;
      backCard.style.transition="none";
      backCard.style.opacity=0;
      backCard.style.transform="translateX(0)";
      trainerTitle.textContent=`${trainers[currentTrainer].name} ì¼ì •`;
      renderCalendar();
    },400);
  }else{
    // ë³µê·€
    frontCard.style.transform="translateX(0)";
    backCard.style.transform=`translateX(${diff<0?"100%":"-100%"}) scale(0.95)`;
    backCard.style.opacity=0;
  }
}

/* PC ì´ë²¤íŠ¸ */
frontCard.addEventListener("mousedown",e=>onDragStart(e.clientX));
window.addEventListener("mousemove",e=>{if(isDragging)onDragMove(e.clientX);});
window.addEventListener("mouseup",e=>onDragEnd(e.clientX));

/* ëª¨ë°”ì¼ ì´ë²¤íŠ¸ */
frontCard.addEventListener("touchstart",e=>onDragStart(e.touches[0].clientX));
frontCard.addEventListener("touchmove",e=>onDragMove(e.touches[0].clientX));
frontCard.addEventListener("touchend",e=>onDragEnd(e.changedTouches[0].clientX));

/* ì˜ˆì•½ ê´€ë ¨ */
const bookings=[{trainer:"íŠ¸ë ˆì´ë„ˆ A",user:"í™ê¸¸ë™",date:"2025-10-15",time:"14:00"}];
const calendar=document.getElementById("calendar");
let selectedDate=null;
const timeSelect=document.getElementById("timeSelect");
const reserveBtn=document.getElementById("reserveBtn");
const baseTimes=["10:00","12:00","14:00","16:00","18:00"];

function renderCalendar(){
  calendar.innerHTML="";
  const now=new Date();
  const todayZero=new Date(now.getFullYear(),now.getMonth(),now.getDate());
  const y=now.getFullYear(),m=now.getMonth();
  const fd=new Date(y,m,1),ld=new Date(y,m+1,0);
  document.getElementById("monthLabel").textContent=`${y}ë…„ ${m+1}ì›”`;
  for(let i=0;i<fd.getDay();i++)calendar.appendChild(document.createElement("div"));
  for(let d=1;d<=ld.getDate();d++){
    const dateObj=new Date(y,m,d);
    const dateStr=`${y}-${m+1}-${d}`;
    const day=document.createElement("div");
    day.className="day";
    day.textContent=d;
    const isPast=dateObj<todayZero;
    const hasBooking=bookings.some(b=>b.trainer===trainers[currentTrainer].name && b.date===dateStr);
    const isToday=dateObj.toDateString()===now.toDateString();
    if(isPast) day.classList.add("disabled");
    if(hasBooking) day.classList.add("booked");
    if(isToday) day.classList.add("today");
    day.onclick=()=>{
      if(isPast) return showToast("ì´ì „ ë‚ ì§œëŠ” ì˜ˆì•½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
      document.querySelectorAll(".day").forEach(c=>c.classList.remove("selected"));
      day.classList.add("selected");
      selectedDate=dateStr;
      updateTimeOptions();
    };
    calendar.appendChild(day);
  }
}

/* ì‹œê°„ ì˜µì…˜ */
function updateTimeOptions(){
  timeSelect.innerHTML='<option value="">ì‹œê°„ ì„ íƒ</option>';
  const t=trainers[currentTrainer];
  const bookedTimes=bookings
    .filter(b=>b.trainer===t.name && b.date===selectedDate)
    .map(b=>b.time);
  let available=false;
  baseTimes.forEach(time=>{
    const opt=document.createElement("option");
    opt.textContent=time;
    opt.value=time;
    if(bookedTimes.includes(time)){
      opt.disabled=true;
      opt.textContent=`${time} (ì˜ˆì•½ë¨)`;
    } else available=true;
    timeSelect.appendChild(opt);
  });
  reserveBtn.disabled=!available;
}

/* í† ìŠ¤íŠ¸ */
function showToast(msg){
  const toast=document.createElement("div");
  toast.className="toast";
  toast.textContent=msg;
  document.body.appendChild(toast);
  setTimeout(()=>toast.remove(),3000);
}

/* ì˜ˆì•½ */
reserveBtn.onclick=()=>{
  const t=trainers[currentTrainer];
  if(!selectedDate)return showToast("ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”!");
  const time=timeSelect.value;
  if(!time)return showToast("ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”!");
  if(bookings.find(b=>b.trainer===t.name&&b.date===selectedDate&&b.time===time))return showToast("ì´ë¯¸ ì˜ˆì•½ëœ ì‹œê°„ì…ë‹ˆë‹¤!");
  const user=prompt("ì˜ˆì•½ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:");
  if(!user)return;
  bookings.push({trainer:t.name,user,date:selectedDate,time});
  showToast(`${t.name}ë‹˜ê³¼ ${selectedDate} ${time} ì˜ˆì•½ ì™„ë£Œ!`);
  renderCalendar();
  updateTimeOptions();
};

renderCalendar();
</script>
</body>
</html>
