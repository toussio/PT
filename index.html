<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PT 트레이너 예약 시스템</title>
<style>
:root {
  --bg:#FFDEB3;
  --card:#FFF3E0;
  --accent:#f97316;
  --grad:linear-gradient(135deg,#ffb77a,#f97316,#ea580c);
  --ink:#2b1d12;
  --muted:#5c4033;
  --disabled:#bfa89c;
}
body{margin:0;font-family:"Pretendard",sans-serif;background:var(--bg);color:var(--ink);overflow-x:hidden;}
.intro-overlay{position:fixed;inset:0;background:url('https://images.unsplash.com/photo-1558611848-73f7eb4001a1?auto=format&fit=crop&w=1400&q=80') center/cover no-repeat;
display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999;text-align:center;color:#fff;backdrop-filter:blur(6px);}
.intro-bg{position:absolute;inset:0;background:rgba(0,0,0,0.4);}
.intro-content{position:relative;z-index:2;max-width:800px;background:rgba(255,243,224,0.9);padding:40px 30px;border-radius:20px;
box-shadow:0 0 20px rgba(249,115,22,0.4);color:var(--ink);}
.intro-content h1{font-size:2rem;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.intro-controls{display:flex;flex-direction:column;gap:12px;align-items:center;}
.intro-controls input{padding:10px 14px;border-radius:10px;border:2px solid #ffd6a5;width:70%;font-size:15px;}
.intro-controls button{background:var(--grad);color:#fff;border:none;padding:10px 24px;border-radius:12px;font-weight:600;cursor:pointer;
box-shadow:0 0 10px rgba(249,115,22,.4);transition:.3s;}
.intro-controls button:hover{transform:translateY(-3px);box-shadow:0 0 18px rgba(249,115,22,.6);}
.main{display:none;padding:40px 20px 80px;animation:fadeInMain 1s ease;}
@keyframes fadeInMain{from{opacity:0;}to{opacity:1;}}
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);background:#fff8ee;color:var(--ink);border:2px solid #ffd6a5;
border-radius:14px;padding:12px 24px;font-weight:600;font-size:15px;box-shadow:0 4px 15px rgba(249,115,22,0.2);
animation:fadeInOut 3s ease forwards;}
@keyframes fadeInOut{0%{opacity:0;transform:translate(-50%,20px);}10%,90%{opacity:1;transform:translate(-50%,0);}100%{opacity:0;transform:translate(-50%,20px);}}
/* 예약 UI 간략화 */
.trainer-section{text-align:center;}
button.reserve-btn{margin-top:20px;background:var(--grad);color:#fff;border:none;border-radius:20px;padding:16px 20px;
font-size:17px;font-weight:700;cursor:pointer;box-shadow:0 5px 15px rgba(249,115,22,0.3);}
</style>
</head>
<body>

<!-- 인트로 -->
<div class="intro-overlay" id="intro">
  <div class="intro-bg"></div>
  <div class="intro-content">
    <h1>🏋️‍♀️ 작두 PT 센터</h1>
    <p>당신의 몸을 디자인하는 곳 — 최고의 트레이너들과 함께하세요.</p>
    <div class="intro-controls">
      <input id="userId" placeholder="고번 입력" />
      <input id="nickname" placeholder="닉네임 입력" />
      <button id="startBtn">시작하기</button>
    </div>
  </div>
</div>

<!-- 메인 -->
<div class="main" id="main">
  <h2>트레이너 예약 시스템</h2>
  <div class="trainer-section">
    <select id="trainerSelect">
      <option value="트레이너 A">트레이너 A</option>
      <option value="트레이너 B">트레이너 B</option>
      <option value="트레이너 C">트레이너 C</option>
    </select>
    <input id="dateInput" type="date" />
    <input id="timeInput" type="time" />
    <button class="reserve-btn" id="reserveBtn">예약하기</button>
  </div>
</div>

<script type="module">
// Firebase 불러오기
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getFirestore, doc, setDoc, addDoc, collection } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCmILB2NGpZmkSByWGjN1ZIBlxwQqRpHHg",
  authDomain: "pttt-dc58e.firebaseapp.com",
  projectId: "pttt-dc58e",
  storageBucket: "pttt-dc58e.appspot.com",
  messagingSenderId: "1015121703137",
  appId: "1:1015121703137:web:b4177af397cc5ed74887a0",
  measurementId: "G-2T9H6H06BT"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// UI 요소
const intro=document.getElementById("intro");
const main=document.getElementById("main");
const startBtn=document.getElementById("startBtn");
const reserveBtn=document.getElementById("reserveBtn");

let currentUser=null;

// 인트로 시작하기
startBtn.onclick=async()=>{
  const id=document.getElementById("userId").value.trim();
  const nick=document.getElementById("nickname").value.trim();
  if(!id || !nick) return showToast("고번과 닉네임을 입력하세요!");

  currentUser={id,nick};
  await setDoc(doc(db,"users",id),{nickname:nick,role:"member",createdAt:new Date()});
  intro.style.opacity="0";
  setTimeout(()=>{intro.style.display="none";main.style.display="block";},600);
};

// 예약하기
reserveBtn.onclick=async()=>{
  const trainer=document.getElementById("trainerSelect").value;
  const date=document.getElementById("dateInput").value;
  const time=document.getElementById("timeInput").value;
  if(!date || !time)return showToast("날짜와 시간을 선택하세요!");

  await addDoc(collection(db,"reservations"),{
    userId:currentUser.id,
    nickname:currentUser.nick,
    trainer,date,time,
    createdAt:new Date(),
    status:"reserved"
  });
  showToast(`${currentUser.nick}님 ${trainer} 예약 완료!`);
};

function showToast(msg){
  const t=document.createElement("div");
  t.className="toast";
  t.textContent=msg;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),3000);
}
</script>
</body>
</html>
